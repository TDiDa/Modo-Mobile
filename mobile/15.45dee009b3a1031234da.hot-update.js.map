{"version":3,"sources":["webpack:///./site/mobile/src/template/Mobile/index.jsx"],"names":["sort","a","b","App","props","lang","window","navigator","language","appLocale","toLowerCase","cnLocale","enLocale","data","state","cateOpend","getStateCache","parent","postMessage","scrollTop","setTimeout","document","documentElement","body","picked","config","themeConfig","location","lists","console","log","components","filter","item","meta","filename","includes","locale","forEach","i","type","fileName","split","indexDemos","indexOf","demos","j","component","push","source","rootPath","basename","port","messages","Object","keys","typeOrder","map","cate","index","length","onOpenChange","typeChinese","title","paths","order","setStateCache","href","addSearch","hashSpliter","subtitle","React","Component","JSON","parse","localStorage","getItem","Date","lastDate","error","warn","newData","setItem","stringify","setState","search"],"mappings":"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","file":"15.45dee009b3a1031234da.hot-update.js","sourcesContent":["/* eslint arrow-body-style: 0 */\n/* eslint no-console:0 */\n\nimport React from 'react';\nimport { Icon } from 'modo-mobile';\nimport { addLocaleData, IntlProvider, FormattedMessage } from 'react-intl';\nimport '../../static/style';\nimport enLocale from '../../en-US';\nimport cnLocale from '../../zh-CN';\nimport { getQuery } from '../../../../utils';\n\nconst sort = (a, b) => {\n  if (a > b) {\n    return 1;\n  }\n  if (a < b) {\n    return -1;\n  }\n  return 0;\n};\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    const lang = getQuery('lang') || window.navigator.language;\n    const appLocale = lang.toLowerCase() === 'zh-cn' ? cnLocale : enLocale;\n    addLocaleData(appLocale.data);\n    this.state = {\n      appLocale,\n      cateOpend: [false, false, false, false, false, false, false],\n      ...this.getStateCache(),\n    };\n  }\n\n  componentDidMount() {\n    if (window.parent && window.parent.postMessage) {\n      window.parent.postMessage('mobile_loaded', '/');\n    }\n    const { scrollTop } = this.state;\n    if (scrollTop) {\n      setTimeout(() => {\n        document.documentElement.scrollTop = scrollTop;\n        document.body.scrollTop = scrollTop;\n      }, 500);\n    }\n  }\n\n  getStateCache = () => {\n    try {\n      const data = JSON.parse(localStorage.getItem('_mobile-index-state'));\n      if (data && +new Date() - data.lastDate < 30 * 60000) {\n        return data;\n      }\n    } catch (error) {\n      console.warn('state cache get error:', error);\n    }\n    return {};\n  };\n\n  setStateCache = (newData = {}) => {\n    try {\n      const { appLocale, ...data } = this.state;\n      localStorage.setItem(\n        '_mobile-index-state',\n        JSON.stringify({\n          ...data,\n          lastDate: +new Date(),\n          ...newData,\n        })\n      );\n    } catch (error) {\n      console.warn('state cache set error:', error);\n    }\n  };\n\n  onOpenChange = index => {\n    const { cateOpend } = this.state;\n    cateOpend[index] = !cateOpend[index];\n    this.setState({ cateOpend }, () => {\n      this.setStateCache({\n        scrollTop: 0,\n      });\n    });\n  };\n\n  addSearch = () => {\n    return window.location.search || '';\n  };\n\n  scrollTop = () => {\n    return document.documentElement.scrollTop || document.body.scrollTop;\n  };\n\n  render() {\n    const { picked, themeConfig: config, location } = this.props;\n    const { appLocale, cateOpend } = this.state;\n    const lists = {};\n\n    console.log(config);\n\n    picked.components.filter(item => item.meta.filename.includes(appLocale.locale)).forEach(i => {\n      const { meta } = i;\n      if (!lists[meta.type]) {\n        lists[meta.type] = [];\n      }\n      const fileName = meta.filename.split('/')[1];\n      if (fileName && config.indexDemos.indexOf(fileName) > -1) {\n        // add demos\n        const demos = [];\n        picked.indexDemos.forEach(j => {\n          if (j.component === fileName) {\n            demos.push(j.meta);\n          }\n        });\n        meta.demos = demos;\n      }\n      const source = getQuery('source');\n      if (source && source === 'design') {\n        if (meta.source && meta.source === 'design') {\n          lists[meta.type].push(meta);\n        }\n      } else {\n        lists[meta.type].push(meta);\n      }\n    });\n\n    let rootPath = `${location.basename}components`;\n    if (window.location.port === '8002') {\n      rootPath = '/components';\n    }\n\n    return (\n      <IntlProvider locale={appLocale.locale} messages={appLocale.messages}>\n        <div className=\"m-demo-page\">\n          <div className=\"m-demo-header\">\n            <h1 className=\"m-demo-title\">\n              <FormattedMessage id=\"app.site.title\" />\n            </h1>\n            <h2 className=\"m-demo-subtitle\">\n              <FormattedMessage id=\"app.site.subTitle\" />\n            </h2>\n          </div>\n          <div className=\"m-demo-content\">\n            {Object.keys(lists)\n              .sort((a, b) => config.typeOrder[a] - config.typeOrder[b])\n              .map(\n                (cate, index) =>\n                  lists[cate].length ? (\n                    <div\n                      key={`${cate}-${index}`}\n                      className={`m-demo-category ${\n                        cateOpend[index] ? 'm-demo-category-open' : 'm-demo-category-closed'\n                      }`}\n                    >\n                      <div\n                        onClick={() => this.onOpenChange(index)}\n                        className=\"m-demo-category-title\"\n                      >\n                        <div className=\"m-demo-category-name\">\n                          {appLocale.locale === 'en-US'\n                            ? cate\n                            : `${config.typeChinese[cate]} ${cate}`}\n                        </div>\n                        <div className=\"m-demo-category-arrow\">\n                          <Icon type=\"down\" />\n                        </div>\n                      </div>\n                      <div className=\"m-demo-category-list\">\n                        {lists[cate]\n                          .sort((a, b) => sort(a.title.toLowerCase(), b.title.toLowerCase()))\n                          .map(item => {\n                            const paths = item.filename.split('/');\n                            if (config.indexDemos.indexOf(paths[1]) > -1) {\n                              return item.demos.sort((a, b) => a.order > b.order).map(j => (\n                                <div\n                                  className=\"m-demo-category-item\"\n                                  key={`${j.filename}-${cate}`}\n                                  onClick={() => {\n                                    this.setStateCache({\n                                      scrollTop: this.scrollTop(),\n                                    });\n                                    window.location.href = `${rootPath}/${\n                                      paths[1]\n                                    }${this.addSearch()}#${paths[1] +\n                                      config.hashSpliter +\n                                      j.order}`;\n                                  }}\n                                >\n                                  {`${item.title} ${\n                                    appLocale.locale === 'zh-CN' ? item.subtitle : ''\n                                  }-${j.title[appLocale.locale]}`}\n                                </div>\n                              ));\n                            }\n                            return (\n                              <div\n                                className=\"m-demo-category-item\"\n                                key={`${item.filename}-${cate}`}\n                                onClick={() => {\n                                  this.setStateCache({\n                                    scrollTop: this.scrollTop(),\n                                  });\n                                  window.location.href = `${rootPath}/${\n                                    paths[1]\n                                  }${this.addSearch()}`;\n                                }}\n                              >\n                                {`${item.title} `}\n                                {!item.subtitle || appLocale.locale === 'en-US'\n                                  ? null\n                                  : item.subtitle}\n                              </div>\n                            );\n                          })}\n                      </div>\n                    </div>\n                  ) : null\n              )}\n          </div>\n        </div>\n      </IntlProvider>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./site/mobile/src/template/Mobile/index.jsx"],"sourceRoot":""}